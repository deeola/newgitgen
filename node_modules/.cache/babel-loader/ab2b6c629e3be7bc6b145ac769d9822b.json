{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useState, useContext } from \"react\";\nimport { useNavigate } from \"react-router\";\nimport AuthContext from \"../context/auth/authContext\";\nimport AlertContext from \"../context/alert/alertContext\";\nimport ProfileContext from \"../context/profile/profileContext\";\n\nconst useShowcase = (callback, ValidateShowcase) => {\n  _s();\n\n  const history = useNavigate();\n  const authContext = useContext(AuthContext);\n  const alertContext = useContext(AlertContext);\n  const profileContext = useContext(ProfileContext);\n  const {\n    setAlert\n  } = alertContext;\n  const {\n    myerror,\n    clearErrors,\n    isAuthenticated\n  } = authContext;\n  const {\n    addProfile,\n    uploadedFile,\n    current,\n    updateProfile\n  } = profileContext; //GET UPLOADED FILE\n\n  useEffect(() => {\n    if (current !== null) {\n      setSignValues(current);\n    } else {\n      setSignValues({\n        firstname: \"\",\n        lastname: \"\",\n        dateOfBirth: \"\",\n        dateofDeath: \"\",\n        profileMessage: \"\",\n        longMessage: \"\",\n        imageLink: uploadedFile.filePath\n      });\n      console.log(current);\n    } //eslint-disable-next-line\n\n  }, [profileContext, current]); //GENERAL\n\n  const [error, setError] = useState({});\n  const [isSubmitting, setIsSubmitting] = useState(false); //SIGN IN\n\n  const [showcaseValues, setSignValues] = useState({\n    firstname: \"\",\n    lastname: \"\",\n    dateOfBirth: \"\",\n    dateofDeath: \"\",\n    profileMessage: \"\",\n    longMessage: \"\",\n    imageLink: uploadedFile.filePath\n  });\n\n  const handleChangeSign = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setSignValues({ ...showcaseValues,\n      [name]: value\n    });\n    console.log(name, value);\n  };\n\n  const showcase = showcaseValues;\n  useEffect(() => {\n    if (isAuthenticated) {\n      history(\"/create-profile\");\n    }\n\n    if (myerror === \"Invalid Credentials\") {\n      setAlert(myerror, \"danger\");\n      clearErrors();\n    } // eslint-disable-next-line\n\n  }, [myerror, isAuthenticated, history]); //Register form and update form function\n\n  const onSubmitForm = e => {\n    setError(ValidateShowcase(showcaseValues));\n\n    if (current === null) {\n      addProfile(showcase);\n    } else {\n      updateProfile(showcase);\n    }\n\n    e.preventDefault();\n    setIsSubmitting(true);\n  };\n\n  useEffect(() => {\n    if (Object.keys(error).length === 0 && isSubmitting) {\n      callback();\n      history(\"/showcase-all\");\n    } // eslint-disable-next-line\n\n  }, [error]);\n  return {\n    showcaseValues,\n    onSubmitForm,\n    handleChangeSign,\n    error\n  };\n};\n\n_s(useShowcase, \"Bgcwepif5e/2WXeGcpRlzlreMqY=\", false, function () {\n  return [useNavigate];\n});\n\nexport default useShowcase;","map":{"version":3,"sources":["C:/Users/Adeola.bamigboye/Desktop/newgen/client/src/components/registration/useShowcase.js"],"names":["useEffect","useState","useContext","useNavigate","AuthContext","AlertContext","ProfileContext","useShowcase","callback","ValidateShowcase","history","authContext","alertContext","profileContext","setAlert","myerror","clearErrors","isAuthenticated","addProfile","uploadedFile","current","updateProfile","setSignValues","firstname","lastname","dateOfBirth","dateofDeath","profileMessage","longMessage","imageLink","filePath","console","log","error","setError","isSubmitting","setIsSubmitting","showcaseValues","handleChangeSign","e","name","value","target","showcase","onSubmitForm","preventDefault","Object","keys","length"],"mappings":"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","sourcesContent":["import { useEffect, useState, useContext } from \"react\";\r\nimport { useNavigate } from \"react-router\";\r\nimport AuthContext from \"../context/auth/authContext\";\r\nimport AlertContext from \"../context/alert/alertContext\";\r\nimport ProfileContext from \"../context/profile/profileContext\";\r\n\r\nconst useShowcase = (callback, ValidateShowcase) => {\r\n  const history = useNavigate();\r\n\r\n  const authContext = useContext(AuthContext);\r\n  const alertContext = useContext(AlertContext);\r\n  const profileContext = useContext(ProfileContext);\r\n\r\n  const { setAlert } = alertContext;\r\n  const { myerror, clearErrors, isAuthenticated } = authContext;\r\n  const { addProfile, uploadedFile, current, updateProfile } = profileContext;\r\n\r\n  //GET UPLOADED FILE\r\n\r\n  useEffect(() => {\r\n    if (current !== null) {\r\n      setSignValues(current);\r\n    } else {\r\n      setSignValues({\r\n        firstname: \"\",\r\n        lastname: \"\",\r\n        dateOfBirth: \"\",\r\n        dateofDeath: \"\",\r\n        profileMessage: \"\",\r\n        longMessage: \"\",\r\n        imageLink: uploadedFile.filePath,\r\n      });\r\n\r\n      console.log(current);\r\n    }\r\n\r\n    //eslint-disable-next-line\r\n  }, [profileContext, current]);\r\n\r\n  //GENERAL\r\n\r\n  const [error, setError] = useState({});\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  //SIGN IN\r\n  const [showcaseValues, setSignValues] = useState({\r\n    firstname: \"\",\r\n    lastname: \"\",\r\n    dateOfBirth: \"\",\r\n    dateofDeath: \"\",\r\n    profileMessage: \"\",\r\n    longMessage: \"\",\r\n    imageLink: uploadedFile.filePath,\r\n  });\r\n\r\n  const handleChangeSign = (e) => {\r\n    const { name, value } = e.target;\r\n\r\n    setSignValues({\r\n      ...showcaseValues,\r\n      [name]: value,\r\n    });\r\n\r\n    console.log(name, value);\r\n  };\r\n\r\n  const showcase = showcaseValues;\r\n\r\n  useEffect(() => {\r\n    if (isAuthenticated) {\r\n      history(\"/create-profile\");\r\n    }\r\n    if (myerror === \"Invalid Credentials\") {\r\n      setAlert(myerror, \"danger\");\r\n      clearErrors();\r\n    }\r\n\r\n    // eslint-disable-next-line\r\n  }, [myerror, isAuthenticated, history]);\r\n\r\n  //Register form and update form function\r\n\r\n  const onSubmitForm = (e) => {\r\n    setError(ValidateShowcase(showcaseValues));\r\n\r\n    if (current === null) {\r\n      addProfile(showcase);\r\n    } else {\r\n      updateProfile(showcase);\r\n    }\r\n\r\n    e.preventDefault();\r\n    setIsSubmitting(true);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (Object.keys(error).length === 0 && isSubmitting) {\r\n      callback();\r\n      history(\"/showcase-all\");\r\n    }\r\n    // eslint-disable-next-line\r\n  }, [error]);\r\n\r\n  return {\r\n    showcaseValues,\r\n    onSubmitForm,\r\n    handleChangeSign,\r\n    error,\r\n  };\r\n};\r\n\r\nexport default useShowcase;\r\n"]},"metadata":{},"sourceType":"module"}